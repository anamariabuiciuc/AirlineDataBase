SET DATEFORMAT DMY;
CREATE TABLE Pilot
( Id_pilot INT CONSTRAINT pk_pilot PRIMARY KEY,
  Id_aeronava BIGINT FOREIGN KEY REFERENCES Aeronava(Id_aeronava)
  ON DELETE SET NULL,
  Nume VARCHAR(25) NOT NULL,
  Prenume VARCHAR(25) NOT NULL,
  Gen VARCHAR(2) NOT NULL,
  CONSTRAINT gen_invalid CHECK (Gen in ('F', 'M','f', 'm')),
  Data_nastere DATE NOT NULL,
  CNP BIGINT  CONSTRAINT cnpul_invalid UNIQUE NOT NULL, 
 CONSTRAINT cnp_incorect CHECK (CNP >= 1000000000000),
  Data_angajare DATE NOT NULL, 
 CONSTRAINT date_incorecte CHECK (Data_angajare > Data_nastere),
  Nr_telefon VARCHAR(15) NOT NULL,
	CONSTRAINT telefon_pilot_invalid CHECK ( LEN(Nr_telefon)>9 and LEN(Nr_telefon)<16),

)


CREATE SEQUENCE Id_pilot_seq  MAXVALUE 999999 INCREMENT BY 1 START WITH 1000  NO CACHE  NO CYCLE;


INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021182, 'Sustac', 'George', 'm', '20.04.1975', 1750420373213,
'15.12.2020', '0773038657');
INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021182, 'Sustac', 'Andrei', 'm', '20.04.1965', 1750420375372,
'15.12.2020', '0745035151');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021190, 'Popescu', 'Roxana', 'F', '16.12.1992', 2921216342910,
'10.09.2020', '0763730031');


INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021178, 'Cancel', 'Paula', 'F', '23.01.1991', 2910123825981,
'4.10.2020', '0763740031');
INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021178, 'Rosu', 'David', 'M', '1.1.1962', 1620101182107,
'4.10.2020', '0740001396');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021191, 'Straub', 'Razvan', 'M', '11.04.1998', 5980411165731,
'10.09.2020', '0754540912');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021192, 'Popovici', 'Madalina', 'F', '28.05.1978', 2780528000102,
'10.09.2020', '0767001417');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021200, 'Popovici', 'Roxana', 'F', '1.09.1960', 2600901085121,
'10.09.2020', '0765595701');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021200, 'Puscuta', 'Ioan', 'M', '8.09.1960', 1600981389521,
'10.09.2020', '0760018674');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021201, 'Macovei', 'Denisa', 'F', '11.11.1981', 2811111043411,
'10.09.2020', '0731099303');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200023000, 'Banu', 'Radu', 'M', '12.09.1981', 2810912900152,
'4.10.2020', '0768001464');


INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200023001, 'Popa', 'Lucian', 'M', '9.03.1972', 1720390900341,
'4.10.2020', '0741096577');

INSERT INTO Pilot VALUES (NEXT VALUE FOR Id_pilot_seq, 123200021308, 'Crudu', 'Malina', 'f', '9.08.1980', 1800809876546,
'15.12.2020', '0744622011');



SELECT *
FROM Pilot;

DROP TABLE Pilot;
DROP SEQUENCE Id_pilot_seq;


delete from Aeronava where Id_aeronava = 123200021182;


	